<script setup>
import testCom from '@/components/test-com.vue'
import { onMounted, ref } from 'vue'

// 模板引用(可以获取dom, 也可以获取组件)
// 1. 调用ref函数, 生成一个ref对象
// 2. 通过ref标识, 进行绑定
// 3. 通过ref对象.value 即可访问到绑定的元素(必须渲染完成后，才能拿到)

const inp = ref(null)
// console.log(inp.value) // null 此时因为dom还没渲染完

// 生命周期钩子 onMounted
onMounted(() => {
  // console.log(inp.value) // 此时dom已经渲染完，能拿到dom
  // 一进页面就聚焦
  // inp.value.focus()
})

// 点击的时候才聚焦
const clickFn = () => {
  inp.value.focus()
}

// -------------------------------------------
// 获取组件
const testRef = ref(null)
const getCom = () => {
  console.log(testRef.value)
  console.log(testRef.value.count)
  testRef.value.sayHi()
}
</script>

<template>
  <div>
    <input ref="inp" type="text">
    <button @click="clickFn">点击让输入框聚焦</button>
  </div>
  <testCom ref="testRef"></testCom>
  <button @click="getCom">获取组件</button>
</template>

<style scoped></style>